{"ast":null,"code":"import { supabase } from '../../utils/initSupabase';\nexport default (async (req, res) => {\n  const token = req.headers.token;\n  const {\n    data: user,\n    error\n  } = await supabase.auth.api.getUser(String(token));\n  if (error) return res.status(401).json({\n    error: error.message\n  });\n  return res.status(200).json(user);\n});","map":{"version":3,"sources":["/Users/villeheikkila/Developer/nextjs-auth/pages/api/getUser.ts"],"names":["supabase","req","res","token","headers","data","user","error","auth","api","getUser","String","status","json","message"],"mappings":"AACA,SAASA,QAAT,QAAyB,0BAAzB;AAEA,gBAAe,OAAOC,GAAP,EAA4BC,GAA5B,KAAqD;AAClE,QAAMC,KAAK,GAAGF,GAAG,CAACG,OAAJ,CAAYD,KAA1B;AAEA,QAAM;AAAEE,IAAAA,IAAI,EAAEC,IAAR;AAAcC,IAAAA;AAAd,MAAwB,MAAMP,QAAQ,CAACQ,IAAT,CAAcC,GAAd,CAAkBC,OAAlB,CAA0BC,MAAM,CAACR,KAAD,CAAhC,CAApC;AAEA,MAAII,KAAJ,EAAW,OAAOL,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEN,IAAAA,KAAK,EAAEA,KAAK,CAACO;AAAf,GAArB,CAAP;AACX,SAAOZ,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBP,IAArB,CAAP;AACD,CAPD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next'\nimport { supabase } from '../../utils/initSupabase'\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n  const token = req.headers.token\n\n  const { data: user, error } = await supabase.auth.api.getUser(String(token))\n\n  if (error) return res.status(401).json({ error: error.message })\n  return res.status(200).json(user)\n}\n\n"]},"metadata":{},"sourceType":"module"}